<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Projects | Climate Solutions</title>
  <link rel="stylesheet" href="/css/main.css" />
</head>
<body data-theme="dim">
  <%- include('partials/navbar', { page: '/solutions/projects' }) %>

  <main class="container mx-auto p-10">
    <!-- Hero Section -->
    <section class="hero bg-base-200 rounded-xl p-10 text-center mb-10 shadow-xl">
      <h1 class="text-5xl font-bold mb-4">Projects</h1>
      <p class="text-lg text-gray-300 mb-6">Browse projects by sector to explore climate change solutions.</p>

      <!-- Filter Buttons -->
      <div class="flex flex-wrap justify-center gap-3 mb-8">
        <a href="/solutions/projects" class="btn btn-outline btn-sm">All</a>
        <a href="/solutions/projects?sector=1" class="btn btn-outline btn-sm">Land & Forestry</a>
        <a href="/solutions/projects?sector=2" class="btn btn-outline btn-sm">Industry</a>
        <a href="/solutions/projects?sector=3" class="btn btn-outline btn-sm">Transportation</a>
        <a href="/solutions/projects?sector=4" class="btn btn-outline btn-sm">Energy</a>
        <a href="/solutions/projects?sector=5" class="btn btn-outline btn-sm">Agriculture</a>
      </div>
    </section>

    <!-- Projects Table -->
    <div class="overflow-x-auto">
      <%
        const sectorNames = {
          1: "Land & Forestry",
          2: "Industry",
          3: "Transportation",
          4: "Energy",
          5: "Agriculture"
        };
      %>

      <table class="table table-zebra w-full text-left">
        <thead>
          <tr>
            <th>Title</th>
            <th>Sector</th>
            <th>Summary</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <% projects.forEach(p => { %>
          <tr>
            <td class="font-semibold"><%= p.title %></td>
            <td>
              <a href="/solutions/projects?sector=<%= p.sector_id %>" class="btn btn-sm btn-outline">
                <%= sectorNames[p.sector_id] || "Unknown" %>
              </a>
            </td>
            <td class="max-w-lg"><%= p.summary_short %></td>
            <td>
              <a href="/solutions/projects/<%= p.id %>" class="btn btn-sm btn-primary">
                Details
              </a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </main>
</body>
</html>
